{"meta":{"title":"Butterfly's blog","subtitle":"Just for fun!","description":"code world","author":"Butterfly","url":"https://blog.wtfk.fun","root":"/"},"pages":[{"title":"关于本博客","date":"2018-01-03T03:16:07.000Z","updated":"2022-04-19T14:08:20.593Z","comments":true,"path":"about/index.html","permalink":"https://blog.wtfk.fun/about/index.html","excerpt":"","text":"欢迎大家一起交流学习~ 本博客由hexo强力打造 主题 -&gt; butterfly"},{"title":"分类","date":"2017-11-06T21:58:54.000Z","updated":"2022-04-19T14:08:20.593Z","comments":false,"path":"categories/index.html","permalink":"https://blog.wtfk.fun/categories/index.html","excerpt":"","text":""},{"title":"标签","date":"2017-11-06T21:29:56.000Z","updated":"2022-04-19T14:08:20.597Z","comments":false,"path":"tags/index.html","permalink":"https://blog.wtfk.fun/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Don't starve Together server 使用Linux Shell脚本管理DST饥荒服务器","slug":"dst-shell","date":"2018-02-20T22:50:30.000Z","updated":"2022-04-19T14:08:20.589Z","comments":true,"path":"2018/02/20/dst-shell/","link":"","permalink":"https://blog.wtfk.fun/2018/02/20/dst-shell/","excerpt":"DST饥荒游戏服务器搭建脚本上一次写了个饥荒服务器的搭建教程，后来想想一系列命令行操作有些繁琐，于是乎就想着把这些初始的游戏server安装配置自动化构建起来,那么什么最适合简单的服务器自动化命令操作呢？在Linux服务器上这个答案显然是Shell脚本,(因为功能很少很简单还用不到python 233)对于大家来说当然越简单使用当然越好，这样想了想, 然后就写了个小脚本: go.sh 这个思想很简单，就是将更新服务器源到获取steamcmd到安装dst server版，建立文件夹等操作串联起来:","text":"DST饥荒游戏服务器搭建脚本上一次写了个饥荒服务器的搭建教程，后来想想一系列命令行操作有些繁琐，于是乎就想着把这些初始的游戏server安装配置自动化构建起来,那么什么最适合简单的服务器自动化命令操作呢？在Linux服务器上这个答案显然是Shell脚本,(因为功能很少很简单还用不到python 233)对于大家来说当然越简单使用当然越好，这样想了想, 然后就写了个小脚本: go.sh 这个思想很简单，就是将更新服务器源到获取steamcmd到安装dst server版，建立文件夹等操作串联起来: 12345678910111213141516171819202122232425262728#!/bin/bashsudo apt-get updatesudo apt-get install lib32gcc1 libcurl4-gnutls-dev:i386 screenmkdir ~/steamcmdcd ~/steamcmdwget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gztar -xvzf steamcmd_linux.tar.gz./steamcmd.sh +login anonymous +force_install_dir ~/dst +app_update 343050 validate +quitcp ~/steamcmd/linux32/libstdc++.so.6 ~/dst/bin/lib32/cd ~/dst/binecho ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Master &gt; overworld.shecho ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Caves &gt; cave.shmkdir -p ~/.klei/DoNotStarveTogether/MyDediServercd ~if [[ `echo $?` -eq 0 ]]; then echo -e &quot;\\033[42;30m ### 游戏服务器初始化完成,请放入配置文件并执行 ./dst \\033[0m&quot;else echo -e &quot;\\033[31m 执行出现了错误，可能因为网络不好，请尝试重新执行一次 \\033[0m&quot; fi 用法: source go.sh DST饥荒游戏服务器管理脚本随着游戏内时间的增加，饥荒服务器往往要经常更新，这个时候总是要登陆服务器运行一大串命令，就显得很是麻烦，于是我就搞了个简单管理脚本 dst.sh 主要原理就是将管理功能分解，比如启动服务，停止进程，重启，删除游戏记录文件，更新服务器等等..一次输入交互，然后选择不同目标函数执行即可. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112#!/bin/bashmaster=&#x27;.klei/DoNotStarveTogether/MyDediServer/Master/&#x27;cave=&#x27;.klei/DoNotStarveTogether/MyDediServer/Caves/&#x27;dst_dir=($&#123;master&#125; $&#123;cave&#125;)stop()&#123; ps -ef|grep dontstarve|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9 if [[ -z `ps -ef | grep -v grep |grep -v &quot;dst.sh&quot;|grep &quot;dontstarve&quot;|sed -n &#x27;1P&#x27;|awk &#x27;&#123;print $2&#125;&#x27;` ]]; then echo -e &quot;\\033[32m ##: 饥荒服务器停止成功!! \\033[0m&quot; fi&#125;del()&#123; stop for i in $&#123;dst_dir[@]&#125;; do if [[ -d $&#123;i&#125;&quot;save&quot; ]]; then rm -r $&#123;i&#125;&quot;save&quot;&amp;&amp;rm -r `find $&#123;i&#125; -name &quot;*.txt&quot;` &amp;&amp; rm -r $&#123;i&#125;&quot;backup&quot; echo -e &quot;\\033[32m ##: $&#123;i&#125;&#x27;s 文件已经删除! \\033[0m&quot; fi done&#125;goMaster()&#123; cd ~/dst/bin if [[ -z `ps -ef | grep -v grep |grep -v &quot;dst.sh&quot;|grep &quot;Master&quot;|sed -n &#x27;1P&#x27;|awk &#x27;&#123;print $2&#125;&#x27;` ]]; then screen -dm sh overworld.sh &amp;&amp; if [[ `echo $?` -eq 0 ]]; then echo -e &quot;\\033[36m ##: 地上成功启动... \\033[0m&quot; fi else echo -e &quot;\\033[31m !!! 地上正在运行中!!! \\033[0m&quot; fi &#125;goCaves()&#123; cd ~/dst/bin if [[ -z `ps -ef | grep -v grep |grep -v &quot;dst.sh&quot;|grep &quot;Caves&quot;|sed -n &#x27;1P&#x27;|awk &#x27;&#123;print $2&#125;&#x27;` ]]; then screen -dm sh cave.sh &amp;&amp; if [[ `echo $?` -eq 0 ]]; then echo -e &quot;\\033[36m ##: 洞穴启动成功... \\033[0m&quot; fi else echo -e &quot;\\033[31m !!!洞穴正在运行中!!! \\033[0m&quot; fi&#125;go()&#123; goMaster goCaves&#125;restart()&#123; stop go&#125;reset()&#123; del go&#125;updst()&#123; stop ~/steamcmd/steamcmd.sh +login anonymous +force_install_dir ~/dst +app_update 343050 validate +quit if [[ `echo $?` -eq 0 ]]; then echo -e &quot;\\033[46;37m ##: 饥荒游戏版本更新成功!! \\033[0m&quot; fi&#125;main()&#123; echo -e &quot;\\033[42;30m ### 饥荒Sever管理脚本 ### \\033[0m&quot; echo -e &quot;\\033[32m 0. \\033[0m 启动地上+洞穴&quot; echo -e &quot;\\033[32m 1. \\033[0m 只启动地上&quot; echo -e &quot;\\033[32m 2. \\033[0m 只启动洞穴&quot; echo -e &quot;\\033[32m 3. \\033[0m 停止饥荒游戏进程&quot; echo -e &quot;\\033[32m 4. \\033[0m 删除游戏存档记录&quot; echo -e &quot;\\033[32m 5. \\033[0m 重启游戏(非重置),可以更新mod&quot; echo -e &quot;\\033[32m 6. \\033[0m 重置饥荒游戏,将删除游戏存档记录&quot; echo -e &quot;\\033[32m 7. \\033[0m 更新饥荒游戏版本&quot; read -p &quot;输入数字,回车确认选择: &quot; choose case $choose in 0 ) go ;; 1 ) goMaster ;; 2 ) goCaves ;; 3 ) stop ;; 4 ) del ;; 5 ) restart ;; 6 ) reset ;; 7 ) updst ;; * ) echo -e &quot;\\033[31m 请输入下列正确的数字选项!! \\033[0m&quot; main ;; esac&#125;main 用法： ./dst.sh这样日常再维护游戏服务器就很方便啦~详情见:—&gt;DST-Server-Build","categories":[{"name":"Linux","slug":"Linux","permalink":"https://blog.wtfk.fun/categories/Linux/"},{"name":"Server","slug":"Linux/Server","permalink":"https://blog.wtfk.fun/categories/Linux/Server/"}],"tags":[{"name":"Game","slug":"Game","permalink":"https://blog.wtfk.fun/tags/Game/"},{"name":"Linux","slug":"Linux","permalink":"https://blog.wtfk.fun/tags/Linux/"},{"name":"shell","slug":"shell","permalink":"https://blog.wtfk.fun/tags/shell/"}]},{"title":"Don't starve Together server 饥荒服务器搭建","slug":"my-first-article","date":"2018-01-12T14:20:45.000Z","updated":"2022-04-19T14:08:20.589Z","comments":true,"path":"2018/01/12/my-first-article/","link":"","permalink":"https://blog.wtfk.fun/2018/01/12/my-first-article/","excerpt":"Don’t Starve Together服务器搭建(Linux) 本教程旨在为了解linux的玩家提供简易搭建教程。VPS-OS：ubuntu64 Klei官方英文搭建教程地址:Don’t Strave Together Dedicated Server","text":"Don’t Starve Together服务器搭建(Linux) 本教程旨在为了解linux的玩家提供简易搭建教程。VPS-OS：ubuntu64 Klei官方英文搭建教程地址:Don’t Strave Together Dedicated Server 1.配置服务器运行环境12sudo apt-get update #更新源sudo apt-get install lib32gcc1 libcurl4-gnutls-dev:i386 screen #必要的库和软件 2.安装steanm命令行平台和游戏包12345mkdir ~/steamcmd #创建文件夹cd ~/steamcmd #打开文件夹wget https://steamcdn-a.akamaihd.net/client/installer/steamcmd_linux.tar.gz #下载精简包tar -xvzf steamcmd_linux.tar.gz #解压包./steamcmd.sh +login anonymous +force_install_dir ~/dst +app_update 343050 validate +quit #匿名登录steamcmd，安装饥荒(DST)到~/dst 3.测试运行环境12cd ~/dst/bin #打开启动命令文件夹./dontstarve_dedicated_server_nullrenderer #运行测试是否有错误 一般会有下面这个错误出现：libstdc++.so.6: version GLIBCXX_3.4.15 not found 1cp ~/steamcmd/linux32/libstdc++.so.6 ~/dst/bin/lib32/ #这是因为缺少库文件,输入此命令复制库文件解决 4.运行启动文件123456cd ~/dst/bin/echo ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Master &gt; overworld.sh #地上世界启动脚本echo ./dontstarve_dedicated_server_nullrenderer -console -cluster MyDediServer -shard Caves &gt; cave.sh #洞穴启动脚本sh overworld.sh #运行，等待几秒会提示你Your Server Will Not Start，这时按Ctrl+c终止进程sh cave.sh #运行，等待几秒会提示你Your Server Will Not Start，这时按Ctrl+c终止进程rm -rf ~/.klei/DoNotStarveTogether/Cluster_* #删除默认文件 ~/.klei/DoNotStarveTogether/MyDediServer 是默认配置目录，里面两个Master和caves分别是地上和洞穴配置目录 5.配置核心文件 1.配置cluster_token.txt文件 进入饥荒主页面，右下角点击Account图标，在打开的页面找到Generate Server Token 按钮，随便输入一个描述，会生成一个token,新建一个cluster_token.txt文件，复制进去，放在MyDediServer目录下。 2.通用配置文件cluster.ini 1234567891011121314151617181920212223242526272829303132[MISC]max_snapshots = 6 # 最大快照数，决定了可回滚的天数console_enabled = true # 是否开启控制台 [SHARD]shard_enabled = true # 服务器共享，要开启洞穴服务器的必须启用bind_ip = 127.0.0.1 # 服务器监听的地址，当所有实例都运行在同一台机器时，可填写 127.0.0.1，会被 server .ini 覆盖master_ip = 127.0.0.1 # master 服务器的 IP，针对非 master 服务器，若与 master 服务器运行在同一台机器时，可填写 127.0.0.1，会被 server.ini 覆盖master_port = 10888 # 监听 master 服务器的 UDP 端口，所有连接至 master 服务器的非 master 服务器必须相同cluster_key = dst # 连接密码，每台服务器必须相同，会被 server.ini 覆盖 [STEAM]steam_group_only = false # 只允许某 Steam 组的成员加入steam_group_id = 0 # 指定某个 Steam 组，填写组 IDsteam_group_admins = false # 开启后，Steam 组的管理员拥有服务器的管理权限 [NETWORK]offline_server = false # 离线服务器，只有局域网用户能加入，并且所有依赖于 Steam 的任何功能都无效，比如说饰品掉落tick_rate = 15 # 每秒通信次数，越高游戏体验越好，但是会加大服务器负担whitelist_slots = 0 # 为白名单用户保留的游戏位cluster_password = # 游戏密码，不设置表示无密码cluster_name = ttionya test # 游戏房间名称cluster_description = description # 游戏房间描述lan_only_cluster = false # 局域网游戏cluster_intention = madness # 游戏偏好，选项为 cooperative, competitive, social, or madness，没什么用 [GAMEPLAY]max_players = 16 # 最大游戏人数pvp = false # 能不能攻击其他玩家game_mode = survival # 游戏模式，可选 survival, endless or wildernesspause_when_empty = true # 没人服务器暂停vote_kick_enabled = true # 投票踢人 设置完毕保存为cluster.ini文件,放在MyDediServer下。 3.地上和洞穴独立配置文件server.ini 配置介绍： 12345678910[SHARD]is_master = true /false # 是否是 master 服务器，只能存在一个 true，其他全是 falsename = caves # 针对非 master 服务器的名称 [STEAM]authentication_port = 8766 # Steam 用的端口，确保每个实例都不相同master_server_port = 27016 # Steam 用的端口，确保每个实例都不相同 [NETWORK]server_port = 10999 # 监听的 UDP 端口，只能介于 10998 - 11018 之间，确保每个实例都不相同 地上和洞穴配置具体在下方：（地上）Master文件夹里的server.ini： 123456789[SHARD]is_master = true [STEAM]authentication_port = 12345master_server_port = 12346 [NETWORK]server_port = 10999 (洞穴)Caves文件夹里的server.ini: 12345678910[SHARD]is_master = falsename = caves [STEAM]authentication_port = 12347master_server_port = 12348 [NETWORK]server_port = 11000 4.地上和洞穴的地图配置文件worldgenoverride.lua 地上： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106return &#123; override_enabled = true, preset = &quot;SURVIVAL_TOGETHER&quot;, -- &quot;SURVIVAL_TOGETHER&quot;, &quot;MOD_MISSING&quot;, &quot;SURVIVAL_TOGETHER_CLASSIC&quot;, &quot;SURVIVAL_DEFAULT_PLUS&quot;, &quot;COMPLETE_DARKNESS&quot;, &quot;DST_CAVE&quot;, &quot;DST_CAVE_PLUS&quot; overrides = &#123; -- default is &quot;never&quot;, &quot;rare&quot;, &quot;default&quot;, &quot;often&quot;, &quot;always&quot; 下方值为default的几个调节的选项，从不，很少，默认，经常，总是 -- MISC task_set = &quot;default&quot;, -- &quot;classic&quot;, &quot;default&quot;, &quot;cave_default&quot; start_location = &quot;default&quot;, -- &quot;caves&quot;, &quot;default&quot;, &quot;plus&quot;, &quot;darkness&quot; world_size = &quot;default&quot;, -- &quot;small&quot;, &quot;medium&quot;, &quot;default&quot;, &quot;huge&quot;-世界大小 branching = &quot;default&quot;, -- &quot;never&quot;, &quot;least&quot;, &quot;default&quot;, &quot;most&quot; loop = &quot;default&quot;, -- &quot;never&quot;, &quot;default&quot;, &quot;always&quot; autumn = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; winter = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; spring = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; summer = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; season_start = &quot;default&quot;, -- &quot;default&quot;, &quot;winter&quot;, &quot;spring&quot;, &quot;summer&quot;, &quot;autumnorspring&quot;, &quot;winterorsummer&quot;, &quot;random&quot; day = &quot;default&quot;, -- &quot;default&quot;, &quot;longday&quot;, &quot;longdusk&quot;, &quot;longnight&quot;, &quot;noday&quot;, &quot;nodusk&quot;, &quot;nonight&quot;, &quot;onlyday&quot;, &quot;onlydusk&quot;, &quot;onlynight&quot; weather = &quot;default&quot;, earthquakes = &quot;default&quot;, --地震 lightning = &quot;default&quot;, frograin = &quot;default&quot;, --青蛙雨 wildfires = &quot;default&quot;, --火灾 touchstone = &quot;default&quot;, regrowth = &quot;default&quot;, -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot; cavelight = &quot;default&quot;, -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot; boons = &quot;default&quot;, prefabswaps_start = &quot;default&quot;, -- &quot;classic&quot;, &quot;default&quot;, &quot;highly random&quot; prefabswaps = &quot;default&quot;, -- &quot;none&quot;, &quot;few&quot;, &quot;default&quot;, &quot;many&quot;, &quot;max&quot; specialevent = &quot;&quot;, -- 特殊节日，一般选填冬季盛宴 winters_feast -- RESOURCES flowers = &quot;default&quot;, grass = &quot;default&quot;, sapling = &quot;default&quot;, marshbush = &quot;default&quot;, tumbleweed = &quot;default&quot;, reeds = &quot;default&quot;, trees = &quot;default&quot;, flint = &quot;default&quot;, rock = &quot;default&quot;, rock_ice = &quot;default&quot;, meteorspawner = &quot;default&quot;, meteorshowers = &quot;default&quot;, mushtree = &quot;default&quot;, fern = &quot;default&quot;, flower_cave = &quot;default&quot;, wormlights = &quot;default&quot;, -- UNPREPARED berrybush = &quot;default&quot;, --浆果 carrot = &quot;default&quot;, --萝卜 mushroom = &quot;default&quot;, --蘑菇 cactus = &quot;default&quot;, banana = &quot;default&quot;, lichen = &quot;default&quot;, -- ANIMALS rabbits = &quot;default&quot;, moles = &quot;default&quot;, butterfly = &quot;default&quot;, birds = &quot;default&quot;, buzzard = &quot;default&quot;, catcoon = &quot;default&quot;, perd = &quot;default&quot;, pigs = &quot;default&quot;, --猪 lightninggoat = &quot;default&quot;, beefalo = &quot;default&quot;, beefaloheat = &quot;default&quot;, hunt = &quot;default&quot;, alternatehunt = &quot;default&quot;, penguins = &quot;default&quot;, cave_ponds = &quot;default&quot;, ponds = &quot;default&quot;, bees = &quot;default&quot;, angrybees = &quot;default&quot;, tallbirds = &quot;default&quot;, slurper = &quot;default&quot;, bunnymen = &quot;default&quot;, slurtles = &quot;default&quot;, rocky = &quot;default&quot;, monkey = &quot;default&quot;, --猴子 -- MONSTERS spiders = &quot;default&quot;, --蜘蛛 cave_spiders = &quot;default&quot;, hounds = &quot;default&quot;, houndmound = &quot;default&quot;, --猎犬袭击 merm = &quot;default&quot;, tentacles = &quot;default&quot;, chess = &quot;default&quot;, --地上发条数量 lureplants = &quot;default&quot;, walrus = &quot;default&quot;, liefs = &quot;default&quot;, --树人频率 deciduousmonster = &quot;default&quot;, krampus = &quot;default&quot;, bearger = &quot;default&quot;, --熊大 deerclops = &quot;default&quot;, -- 巨鹿 goosemoose = &quot;default&quot;, -- 蠢鹅 dragonfly = &quot;default&quot;, --苍蝇 bats = &quot;default&quot;, fissure = &quot;default&quot;, worms = &quot;default&quot;, --蠕虫 &#125;,&#125; 洞穴： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104return &#123; override_enabled = true, preset = &quot;DST_CAVE&quot;, -- &quot;SURVIVAL_TOGETHER&quot;, &quot;MOD_MISSING&quot;, &quot;SURVIVAL_TOGETHER_CLASSIC&quot;, &quot;SURVIVAL_DEFAULT_PLUS&quot;, &quot;COMPLETE_DARKNESS&quot;, &quot;DST_CAVE&quot;, &quot;DST_CAVE_PLUS&quot; overrides = &#123; -- defalut is &quot;never&quot;, &quot;rare&quot;, &quot;default&quot;, &quot;often&quot;, &quot;always&quot; -- MISC task_set = &quot;cave_default&quot;, -- &quot;classic&quot;, &quot;default&quot;, &quot;cave_default&quot; start_location = &quot;default&quot;, -- &quot;caves&quot;, &quot;default&quot;, &quot;plus&quot;, &quot;darkness&quot; world_size = &quot;default&quot;, -- &quot;small&quot;, &quot;medium&quot;, &quot;default&quot;, &quot;huge&quot; branching = &quot;default&quot;, -- &quot;never&quot;, &quot;least&quot;, &quot;default&quot;, &quot;most&quot; loop = &quot;default&quot;, -- &quot;never&quot;, &quot;default&quot;, &quot;always&quot; autumn = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; winter = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; spring = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; summer = &quot;default&quot;, -- &quot;noseason&quot;, &quot;veryshortseason&quot;, &quot;shortseason&quot;, &quot;default&quot;, &quot;longseason&quot;, &quot;verylongseason&quot;, &quot;random&quot; season_start = &quot;default&quot;, -- &quot;default&quot;, &quot;winter&quot;, &quot;spring&quot;, &quot;summer&quot;, &quot;autumnorspring&quot;, &quot;winterorsummer&quot;, &quot;random&quot; day = &quot;default&quot;, -- &quot;default&quot;, &quot;longday&quot;, &quot;longdusk&quot;, &quot;longnight&quot;, &quot;noday&quot;, &quot;nodusk&quot;, &quot;nonight&quot;, &quot;onlyday&quot;, &quot;onlydusk&quot;, &quot;onlynight&quot; weather = &quot;default&quot;, earthquakes = &quot;default&quot;, lightning = &quot;default&quot;, frograin = &quot;default&quot;, wildfires = &quot;default&quot;, touchstone = &quot;default&quot;, regrowth = &quot;default&quot;, -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot; cavelight = &quot;default&quot;, -- &quot;veryslow&quot;, &quot;slow&quot;, &quot;default&quot;, &quot;fast&quot;, &quot;veryfast&quot; boons = &quot;default&quot;, prefabswaps_start = &quot;default&quot;, -- &quot;classic&quot;, &quot;default&quot;, &quot;highly random&quot; prefabswaps = &quot;default&quot;, -- &quot;none&quot;, &quot;few&quot;, &quot;default&quot;, &quot;many&quot;, &quot;max&quot; -- RESOURCES flowers = &quot;default&quot;, grass = &quot;default&quot;, sapling = &quot;default&quot;, marshbush = &quot;default&quot;, tumbleweed = &quot;default&quot;, reeds = &quot;default&quot;, trees = &quot;default&quot;, flint = &quot;default&quot;, rock = &quot;default&quot;, rock_ice = &quot;default&quot;, meteorspawner = &quot;default&quot;, meteorshowers = &quot;default&quot;, mushtree = &quot;default&quot;, fern = &quot;default&quot;, flower_cave = &quot;default&quot;, wormlights = &quot;default&quot;, -- UNPREPARED berrybush = &quot;default&quot;, carrot = &quot;default&quot;, mushroom = &quot;default&quot;, cactus = &quot;default&quot;, banana = &quot;default&quot;, lichen = &quot;default&quot;, -- ANIMALS rabbits = &quot;default&quot;, moles = &quot;default&quot;, butterfly = &quot;default&quot;, birds = &quot;default&quot;, buzzard = &quot;default&quot;, catcoon = &quot;default&quot;, perd = &quot;default&quot;, pigs = &quot;default&quot;, lightninggoat = &quot;default&quot;, beefalo = &quot;default&quot;, beefaloheat = &quot;default&quot;, hunt = &quot;default&quot;, alternatehunt = &quot;default&quot;, penguins = &quot;default&quot;, cave_ponds = &quot;default&quot;, ponds = &quot;default&quot;, bees = &quot;default&quot;, angrybees = &quot;default&quot;, tallbirds = &quot;default&quot;, slurper = &quot;default&quot;, bunnymen = &quot;default&quot;, slurtles = &quot;default&quot;, rocky = &quot;default&quot;, monkey = &quot;default&quot;, -- MONSTERS spiders = &quot;default&quot;, cave_spiders = &quot;default&quot;, hounds = &quot;default&quot;, houndmound = &quot;default&quot;, merm = &quot;default&quot;, tentacles = &quot;default&quot;, chess = &quot;default&quot;, lureplants = &quot;default&quot;, walrus = &quot;default&quot;, liefs = &quot;default&quot;, deciduousmonster = &quot;default&quot;, krampus = &quot;default&quot;, bearger = &quot;default&quot;, deerclops = &quot;default&quot;, goosemoose = &quot;default&quot;, dragonfly = &quot;default&quot;, bats = &quot;default&quot;, fissure = &quot;default&quot;, worms = &quot;default&quot;, &#125;,&#125; 这时基本的已经完成，已经可以正常开服，但是没MOD怎么玩得下去嘞～下面6，7，8为可选配置： 6. 配置下载mod文件 创建dedicated_server_mods_setup.lua文件： 123456789101112131415 --第一种是安装单独mod --ServerModSetup(&quot;mod的id&quot;) --第二种是安装mod合集 --ServerModCollectionSetup(&quot;合集的id&quot;)--下面推荐几个常用的mod ServerModSetup(&quot;666155465&quot;) --show meServerModSetup(&quot;375859599&quot;) --health infoServerModSetup(&quot;780009141&quot;) --物品箱子提示ServerModSetup(&quot;462434129&quot;) --restartServerModSetup(&quot;367546858&quot;) --服务端中文ServerModSetup(&quot;841471368&quot;) --防熊锁ServerModSetup(&quot;378160973&quot;) --全图定位 --饥荒的mod id查看：浏览器打开创意工坊任意要下载的mod页面，url处会有id=xxxxxxxx 保存在~/dst/mods/ 目录下，第一次开服时服务器会自动下载mod。 7. 配置地上和洞穴的mod开关文件MOD开关文件：modoverrides.lua 12345678910return &#123;[&quot;workshop-375859599&quot;] = &#123; enabled = true &#125;,--healh info[&quot;workshop-841471368&quot;] = &#123; enabled = true &#125;,--fangxiongsuo[&quot;workshop-378160973&quot;] = &#123; enabled = true &#125;,--Global Positions[&quot;workshop-462434129&quot;] = &#123; enabled = true &#125;,--restart[&quot;workshop-780009141&quot;] = &#123; enabled = true &#125;,--Finder[&quot;workshop-666155465&quot;] = &#123; enabled = true &#125;,--Show Me[&quot;workshop-367546858&quot;] = &#123;enabled = true&#125; --chinese&#125;--true表示启用，false表示禁用 Master和Caves 文件夹里各放一份。 8. 配置管理员，黑名单等 创建adminlist.txt文件，填入用户id（KU_开头的），用户id可以在人员进入服务器后Master目录下的chat log文件里找到。 黑白名单同理，分别创建blocklist.txt和whitelist.txt 最后你的服务器目录应该是这样：12345678910111213141516171819202122232425&#x2F;home&#x2F;ubuntu&#x2F;.klei&#x2F;DoNotStarveTogether&#x2F;MyDediServer|| adminlist.txt（&#x2F;adminlist.txt）| blocklist.txt（&#x2F;blocklist.txt）| cluster.ini（&#x2F;cluster.ini）| cluster_token.txt（&#x2F;cluster_token.txt）| whitelist.txt（&#x2F;whitelist.txt）||---Master| | modoverrides.lua（&#x2F;Master&#x2F;modoverrides.lua）| | server.ini（&#x2F;Master&#x2F;server.ini）| | worldgenoverride.lua（&#x2F;Master&#x2F;worldgenoverride.lua）| | | ||---Caves | modoverrides.lua（&#x2F;Caves&#x2F;modoverrides.lua） | server.ini（&#x2F;Caves&#x2F;server.ini） | worldgenoverride.lua（&#x2F;Caves&#x2F;worldgenoverride.lua） &#x2F;home&#x2F;ubuntu&#x2F;dst&#x2F;mods|| dedicated_server_mods_setup.lua（&#x2F;dedicated_server_mods_setup.lua） 最后一步：开服！ 1234567#启动地上cd ~/dst/binscreen sh ./overworld.sh 再按下Ctrl+A键,然后按C键创建另一个会话#启动地下cd ~/dst/bin screen sh ./cave.sh 注：饥荒版本更新时，服务器版本更新命令（先关闭游戏进程）： 1~/steamcmd/steamcmd.sh +login anonymous +force_install_dir ~/dst +app_update 343050 validate +quit ———简单开服&amp;管理———-其实这些命令都可以简化连续成自动化脚本来使用，，于是我写了个综合示例 DST server build里面的go.sh和dst.sh即为开服脚本和管理脚本，详解–&gt; 使用简单shell脚本管理DST服务器","categories":[{"name":"Linux","slug":"Linux","permalink":"https://blog.wtfk.fun/categories/Linux/"},{"name":"Server","slug":"Linux/Server","permalink":"https://blog.wtfk.fun/categories/Linux/Server/"}],"tags":[{"name":"Game","slug":"Game","permalink":"https://blog.wtfk.fun/tags/Game/"},{"name":"Linux","slug":"Linux","permalink":"https://blog.wtfk.fun/tags/Linux/"},{"name":"lua","slug":"lua","permalink":"https://blog.wtfk.fun/tags/lua/"}]}],"categories":[{"name":"Linux","slug":"Linux","permalink":"https://blog.wtfk.fun/categories/Linux/"},{"name":"Server","slug":"Linux/Server","permalink":"https://blog.wtfk.fun/categories/Linux/Server/"}],"tags":[{"name":"Game","slug":"Game","permalink":"https://blog.wtfk.fun/tags/Game/"},{"name":"Linux","slug":"Linux","permalink":"https://blog.wtfk.fun/tags/Linux/"},{"name":"shell","slug":"shell","permalink":"https://blog.wtfk.fun/tags/shell/"},{"name":"lua","slug":"lua","permalink":"https://blog.wtfk.fun/tags/lua/"}]}